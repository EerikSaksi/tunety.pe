(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[18],{164:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var r=n(91),c=n(94),a=n(3),o=n.n(a),u=n(10),i=n(49),s=n(99),f=n(95),l=n(27),d=n(93),m=n(97),b=n.n(m),y=n(98),p=function(e){var t=e.text,n=e.fadeOut,c=e.style,u=Object(a.useState)(0),i=Object(r.a)(u,2),s=i[0],f=i[1],l=Object(a.useState)(""),m=Object(r.a)(l,2),p=m[0],j=m[1],O=function(e){return new Promise((function(t){return setTimeout(t,e)}))};return Object(a.useEffect)((function(){f(1),j(t)}),[t]),Object(a.useEffect)((function(){(function(){var e=Object(y.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(0),e.next=3,O(250);case 3:j(t),f(1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),o.a.createElement("p",{style:Object(d.a)({textAlign:n?"left":"center",transition:"opacity 0.25s",opacity:s},c)},p)},j=n(100),O=n(161),g=n(117),w=n.n(g);function v(){var e=Object(c.a)(["\n  query processedlyrics($id: String) {\n    processedLyrics(id: $id) {\n      id\n      text\n    }\n  }\n"]);return v=function(){return e},e}var E=Object(i.gql)(v());function h(e){var t=e.startTime,n=e.endTime,c=Object(u.g)(),d=c.youtubeID,m=c.geniusID,b=Object(a.useRef)(null),y=Object(a.useState)(!1),g=Object(r.a)(y,2),v=g[0],h=g[1],k=Object(a.useState)(!1),x=Object(r.a)(k,2),S=x[0],L=x[1],T=Object(a.useState)(!0),C=Object(r.a)(T,2),I=C[0],z=C[1],B=Object(a.useState)({row:0,col:0}),W=Object(r.a)(B,2),q=W[0],A=W[1],D=Object(a.useState)({}),J=Object(r.a)(D,2),N=J[0],P=J[1];Object(a.useEffect)((function(){var e=function(e){e.keyCode&&(v?I||A((function(e){var t=e.row,n=e.col;if(console.log({row:t,col:n}),t<N.length)return P((function(e){return e.map((function(e,r){return e.map((function(e,c){return r===t&&c===n&&(e.time=b.current.getCurrentTime()),e}))}))})),N[t].length-1===n?{row:t+1,col:0}:{row:t,col:n+1}})):(h(!0),v&&b.current&&b.current.seekTo(t)))};return window.addEventListener("keydown",e,!1),function(){return window.removeEventListener("keydown",e)}}),[I,v,t]),Object(a.useEffect)((function(){var e=setInterval((function(){b.current&&b.current.getCurrentTime()>n&&L(!0)}),1e3);return function(){return clearInterval(e)}}),[b,n]);var R=Object(a.useState)("Waiting for lyrics to be processed..."),$=Object(r.a)(R,2),_=$[0],Q=$[1],F=Object(i.useQuery)(E,{variables:{id:m},onCompleted:function(){P(F.processedLyrics.map((function(e){return e.map((function(e){return delete e.__typename,e}))}))),Q("Press any key to start the video")}}).data;return Object(a.useEffect)((function(){I||Q("Whenever the highlighted word is said, press any key to sync it.")}),[I]),S?o.a.createElement(O.default,{syncedLyrics:N,startTime:t,endTime:n}):o.a.createElement(f.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0}},o.a.createElement(j.a,{centerContent:o.a.createElement(p,{text:_,style:{fontSize:30,color:"white",zIndex:1e3,textAlign:"center"}})}),o.a.createElement(s.a,{className:"justify-content-md-center"},o.a.createElement(w.a,{ref:b,playing:v,url:"https://www.youtube.com/watch?v=".concat(d),onEnded:function(){return L(!0)},onBuffer:function(){return z(!0)},onBufferEnd:function(){return z(!1)},controls:!1})),F?F.processedLyrics.slice(q.row).map((function(e,t){return o.a.createElement(s.a,{className:"justify-content-md-center",style:{minWidth:"100%"},key:t},e.map((function(e,n){return 0===t&&n===q.col?o.a.createElement("mark",{key:e.id,style:{backgroundColor:"#007bff",color:"#fff",marginBottom:10,fontSize:"40px",marginLeft:"0.5em"}},e.text):o.a.createElement("p",{key:e.id,style:{marginBottom:10,fontSize:"40px",marginLeft:"0.5em"}},e.text)})))})):o.a.createElement(l.a,{centered:!0}))}}}]);
//# sourceMappingURL=18.44829f16.chunk.js.map