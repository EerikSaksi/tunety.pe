(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[9],{119:function(e,t,n){"use strict";var r=n(1),a=r.useState,i=r.useCallback,o=r.useLayoutEffect;function u(e){return e?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}}e.exports=function(e){var t=a(u(e?e.current:{})),n=t[0],r=t[1],c=i((function(){e.current&&r(u(e.current))}),[e]);return o((function(){if(e.current){if(c(),"function"===typeof ResizeObserver){var t=new ResizeObserver((function(){c()}));return t.observe(e.current),function(){t.disconnect(e.current),t=null}}return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}}),[e.current]),n}},156:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));var r=n(68),a=n.n(r),i=n(69),o=n(59),u=n(71),c=n(1),s=n.n(c),l=n(66),f=n(73),m=n(61),b=n(93),d=n(64);function y(e){var t=e.text,n=(e.time,e.id,e.topOffset),r=e.commonSuffixLength,a=e.horizontalOffsetPercentage;return s.a.createElement(d.a,null,s.a.createElement("div",{style:{width:"auto",position:"absolute",transform:"translate(100%, ".concat(n,"px)"),transition:"opacity .1s ease-in-out, top 2s ease-in-out",left:"".concat(a,"%")}},s.a.createElement("p",null,s.a.createElement("span",{style:{color:"green",display:"inline-block"}},t.substring(0,r||0)),s.a.createElement("span",{style:{color:"black",display:"inline-block"}},t.substring(r||0)))))}var p=n(119),g=n.n(p);function h(e){var t=e.syncedLyrics,n=e.input,r=e.setInput,a=e.videoDuration,i=e.animateBackgroundColor,u=Object(c.useRef)(),l=g()(u).height,f=Object(c.useState)(0),m=Object(o.a)(f,2),d=m[0],p=m[1],h=Object(c.useState)(t[0]),v=Object(o.a)(h,2),E=v[0],O=v[1];Object(c.useEffect)((function(){var e=!0,o=E.map((function(t){var r=(a-t.time)/3*l;return r<=0&&(r=0,e=!1),t.topOffset=r,r&&0===t.text.indexOf(n)?t.commonSuffixLength=n.length:t.commonSuffixLength=0,t})).filter((function(e){return a-e.time>3?(i("red"),!1):!e.topOffset||e.text+" "!==n||(r(""),i("green"),!1)}));if(e){var u=d+1;u<t.length&&(p(u),o.push.apply(o,Object(b.a)(t[u])))}O(o)}),[a]);var j=function(e){O.filter((function(t){return t.id!==e}))};return s.a.createElement("div",{ref:u,style:{position:"absolute",top:60,bottom:"20%",left:0,right:0}},E===[]?null:E.map((function(e){return s.a.createElement(y,Object.assign({key:e.id},e,{input:n,removeByID:j,topOffset:e.topOffset,commonSuffixLength:e.commonSuffixLength}))})))}var v=n(72),E=n(5),O=n(63),j=n(28),w=n(57),I=n(15);function D(){var e=Object(u.a)(["\nquery synchronizationdata($youtubeID: String, $geniusID: String){\n  synchronizationData(youtubeID: $youtubeID, geniusID: $geniusID){\n    startTime\n    endTime\n  }\n}"]);return D=function(){return e},e}function S(){var e=Object(u.a)(["\nquery syncedlyrics($youtubeID: String, $geniusID: String){\n  syncedLyrics(youtubeID: $youtubeID, geniusID: $geniusID){\n    text\n    time\n    id\n    horizontalOffsetPercentage\n  }\n}"]);return S=function(){return e},e}var k=Object(j.b)(S()),C=Object(j.b)(D());function x(){var e=Object(E.h)(),t=e.youtubeID,n=e.geniusID,r=Object(w.c)(k,{variables:{youtubeID:t,geniusID:n}}),u=r.data,b=(u=void 0===u?{}:u).syncedLyrics,d=r.loading,y=Object(w.c)(C,{variables:{youtubeID:t,geniusID:n}}),p=y.data,g=(p=void 0===p?{}:p).synchronizationData,j=y.error,D=Object(E.f)(),S=Object(c.useState)(""),x=Object(o.a)(S,2),z=x[0],L=x[1],T=Object(c.useState)("white"),B=Object(o.a)(T,2),$=B[0],R=B[1],_=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(t),e.next=3,new Promise((function(e){return setTimeout(e,100)}));case 3:R("white");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=Object(c.useRef)(),F=Object(c.useState)(!0),N=Object(o.a)(F,2),P=(N[0],N[1]),q=Object(c.useState)(!1),H=Object(o.a)(q,2),J=H[0],V=H[1],G=Object(c.useState)(!0),M=Object(o.a)(G,2),U=M[0],W=M[1],K=Object(c.useRef)();return t&&n?J?s.a.createElement("p",null,"wowa"):s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,null),j?s.a.createElement(l.a,{className:"justify-content-md-center"},s.a.createElement(m.a,{onClick:function(){return D.push("/s/".concat(t,"/").concat(n))}},s.a.createElement("p",null,"Create synchronization for this song and video."))):d?s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{style:{justifyContent:"center"}},s.a.createElement("p",null,"Loading lyrics")),s.a.createElement(l.a,{style:{justifyContent:"center"}},s.a.createElement(I.a,null))):s.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:$,transition:"background-color 200ms"}},s.a.createElement(l.a,null,s.a.createElement(f.a,{style:{position:"absolute",bottom:0,left:"50%",width:800,transform:"translate(-50%, 0%)",fontSize:100},onChange:function(e){return L(e.target.value)}},s.a.createElement(f.a.Control,{value:z,className:"shadow-lg",ref:K,style:{fontSize:40},autoFocus:!0}))),s.a.createElement(v.a,{ref:A,visible:!1,url:"https://www.youtube.com/watch?v=".concat(t),playing:!0,setBuffering:P,setEnded:V,setVideoDuration:W,startTime:g?g[0].startTime:null,endTime:g?g[0].endTime:null}),s.a.createElement(h,{input:z,setInput:L,syncedLyrics:d?[]:b,videoDuration:U,animateBackgroundColor:_}))):"Invalid URL: Missing either a youtubeID or a geniusID"}},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),a=n.n(r),i=n(74),o=n(81),u=n(61),c=n(5),s=n(80);function l(e){var t=e.centerContent,r=e.customContent,l=Object(c.f)();return a.a.createElement(i.a,{style:{height:60},sticky:"top",bg:"secondary",variant:"dark"},a.a.createElement(i.a.Brand,{onClick:function(){return l.push("/")}},a.a.createElement(u.a,{variant:"outline-primary",style:{justifyContent:"left",width:142,height:44},size:"sm"},a.a.createElement("img",{src:n(67),style:{top:0,height:"100%",width:"100%"}}))),r,a.a.createElement(i.a.Collapse,{style:{position:"absolute",transform:"translate(-50%, 0%)",left:"50%"}},t),a.a.createElement(o.a,{className:"ml-auto"},a.a.createElement(s.a,{href:"https://github.com/EerikSaksi/type_to_lyrics","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star EerikSaksi/type_to_lyrics on GitHub"},"Star")))}},67:function(e,t,n){e.exports=n.p+"static/media/home.34034ca8.png"},72:function(e,t,n){"use strict";var r=n(65),a=n(1),i=n.n(a),o=n(88),u=n.n(o),c=i.a.forwardRef((function(e,t){var n=e.visible,o=e.muted,c=e.url,s=e.playing,l=e.setBuffering,f=e.setEnded,m=e.setVideoDuration,b=e.disableControls,d=e.style,y=e.startTime,p=e.endTime;return Object(a.useEffect)((function(){var e=setInterval((function(){if(m&&t.current){var e=t.current.getCurrentTime();m(e),p&&e>p&&f(!0)}}),10);return function(){return clearInterval(e)}}),[p]),Object(a.useEffect)((function(){t.current&&t.current.seekTo(y)}),[t.current,y]),i.a.createElement(u.a,{ref:t,style:Object(r.a)({pointerEvents:b?"none":"auto",opacity:n?1:0},d),url:c,playing:s,muted:o,controls:b,onBuffer:function(){l&&l(!0)},onBufferEnd:function(){l&&l(!1)},onEnded:function(){f&&f(!0)}})}));t.a=c},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(84);var a=n(83);function i(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=9.a09683ff.chunk.js.map