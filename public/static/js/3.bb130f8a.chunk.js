(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{102:function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(k){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var a=e&&e.prototype instanceof f?e:f,o=Object.create(a.prototype),i=new O(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return L()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var c=E(i,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,i),o}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(k){return{type:"throw",arg:k}}}t.wrap=u;var l={};function f(){}function h(){}function y(){}var m={};m[a]=function(){return this};var d=Object.getPrototypeOf,p=d&&d(d(x([])));p&&p!==e&&n.call(p,a)&&(m=p);var v=y.prototype=f.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var r;this._invoke=function(a,o){function i(){return new e((function(r,i){!function r(a,o,i,c){var u=s(t[a],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function E(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=v.constructor=y,y.constructor=h,h.displayName=c(y,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),g.prototype[o]=function(){return this},t.AsyncIterator=g,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new g(u(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(v),c(v,i,"Generator"),v[a]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;j(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},157:function(t,e,n){t.exports=n.p+"static/media/fast-forward.04baf9a2.png"},161:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return N}));var r=n(93),a=n(91),o=n(94),i=n(3),c=n.n(i),u=n(99),s=n(107),l=n(95),f=n(50),h=n(92),y=n(108),m=n(10),d=n(117),p=n.n(d),v=n(97),b=n.n(v),g=n(98),E=n(154);var w=c.a.memo((function(t){var e=t.id,n=t.text,r=t.time,o=t.changeLyricById,u=t.videoDuration,s=t.width,l=t.playing,f=t.setPlaying,y=Object(i.useState)(0),m=Object(a.a)(y,2),d=m[0],p=m[1];Object(i.useEffect)((function(){p(s*((r-u+5)/10))}),[u]);var v=Object(i.useState)("primary"),w=Object(a.a)(v,2),j=w[0],O=w[1],x=Object(i.useState)(15),L=Object(a.a)(x,2),k=L[0],S=L[1];Object(i.useEffect)((function(){r-u<=.5&&r-u>0&&function(){var t=Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t,1e3*(r-u))}));case 2:return O("warning"),t.next=5,new Promise((function(t){return setTimeout(t,500)}));case 5:O("primary");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[u,r]);var C=Object(i.useState)(d),T=Object(a.a)(C,2),P=T[0],I=T[1],N=Object(i.useState)(!1),D=Object(a.a)(N,2),_=D[0],z=D[1],B=function(){var t=Object(g.a)(b.a.mark((function t(n){var r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=10*((r=n/s)-.5),a=l,f(!1),o(e,u+r),z(!1),t.next=8,new Promise((function(t){return setTimeout(t,1e3)}));case 8:a&&f(!0),S(15);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){S(l?18:1e3)}),[l]),Object(i.useEffect)((function(){_||I(d)}),[d,_]),c.a.createElement(c.a.Fragment,null,c.a.createElement(E.DraggableCore,{axis:"x",onStart:function(){return z(!0)},onStop:function(){return B(P)},onDrag:function(t){var e=t.movementX,n=t.clientX,r=t.screenX;I((function(t){return e*(n/r)+t})),S(0)}},c.a.createElement(h.a,{key:e,variant:j,style:{transition:"transform linear ".concat(k,"ms"),position:"absolute",alignSelf:"center",transform:"translate(".concat(P,"px, 0px)"),justifyContent:"start"}},c.a.createElement("p",{style:{fontSize:"30px"}},n))))}));function j(t){var e=t.videoDuration,n=t.syncedLyrics,r=t.changeLyricById,o=t.aboveProgressBar,s=t.playing,f=t.setPlaying,h=Object(i.useState)(Array(3)),y=Object(a.a)(h,2),m=y[0],d=y[1],p=Object(i.useState)(0),v=Object(a.a)(p,2),b=v[0],g=v[1],E=Object(i.useRef)();return Object(i.useLayoutEffect)((function(){E.current&&g(E.current.offsetWidth)}),[]),Object(i.useEffect)((function(){for(var t=Array(3),r=0;r<t.length;r++)t[r]=[];n.forEach((function(n){n.forEach((function(n){var r,a=n.time-e;(-5<a&&a<5||!n.time)&&(r=n.id,o?0<=r%6&&r%6<=2:3<=r%6&&r%6<=6)&&t[n.id%3].push(n)}))})),d(t)}),[e,o,n]),c.a.createElement(l.a,{ref:E,fluid:!0,style:{height:"30%",width:"80%"}},c.a.createElement(c.a.Fragment,null,m.map((function(t,n){return c.a.createElement(u.a,{key:n,style:{marginTop:"8%"}},t.map((function(t){return c.a.createElement(w,{key:t.id,text:t.text,id:t.id,time:t.time,changeLyricById:r,videoDuration:e,width:b,playing:s,setPlaying:f})})))}))))}var O=n(49),x=n(100),L=n(110),k=n(134),S=n.n(k),C=n(135),T=n.n(C);function P(){var t=Object(o.a)(["\n  mutation postsyncedlyrics($syncedLyrics: [[InputSyncedLyric]], $synchronizationData: InputSynchronizationData,) {\n    postSyncedLyrics(syncedLyrics: $syncedLyrics, synchronizationData: $synchronizationData,)\n  }\n"]);return P=function(){return t},t}var I=Object(O.gql)(P());function N(t){var e=t.syncedLyrics,o=t.startTime,d=t.endTime,v=Object(m.g)(),b=v.youtubeID,g=v.geniusID,E=Object(i.useRef)(null),w=Object(i.useRef)(null),k=Object(i.useRef)(null),C=Object(m.f)(),P=Object(i.useState)(e),N=Object(a.a)(P,2),D=N[0],_=N[1],z=Object(i.useState)(""),B=Object(a.a)(z,2),F=B[0],G=B[1],R=Object(i.useState)(""),A=Object(a.a)(R,2),M=A[0],X=A[1],$=Object(O.useMutation)(I,{variables:{syncedLyrics:D,synchronizationData:{youtubeID:b,geniusID:g,startTime:o,endTime:d,tokenId:F}},onCompleted:function(){lt(!0)},skip:""===F}),H=Object(a.a)($,1)[0],J=Object(i.useState)(""),W=Object(a.a)(J,2),Y=W[0],q=W[1],U=Object(i.useState)(0),K=Object(a.a)(U,2),Q=K[0],V=K[1],Z=Object(i.useState)(""),tt=Object(a.a)(Z,2),et=tt[0],nt=tt[1],rt=Object(i.useState)(!1),at=Object(a.a)(rt,2),ot=at[0],it=at[1],ct=Object(i.useState)(!1),ut=Object(a.a)(ct,2),st=ut[0],lt=ut[1],ft=function(t){return"".concat(Math.floor(t/60),":").concat(t%60>=10?Math.floor(t%60):"0"+Math.floor(t%60))},ht=Object(i.useCallback)((function(t,e){_((function(n){return n.map((function(n){return n.map((function(n){return n.id===t?(nt("'".concat(n.text,"' ").concat(ft(n.time)," \u2192 ").concat(ft(e))),Object(r.a)(Object(r.a)({},n),{},{time:e})):n}))}))})),Q-e<3&&E.current.seekTo(e-2)}),[]),yt=Object(i.useState)(!0),mt=Object(a.a)(yt,2),dt=mt[0],pt=mt[1],vt=Object(i.useState)(!0),bt=Object(a.a)(vt,2),gt=bt[0],Et=bt[1];return Object(i.useEffect)((function(){var t=setInterval((function(){if(E.current){var t=E.current.getCurrentTime();t<o&&(E.current.seekTo(o),V(o)),t>d?(E.seekTo(d),V(d),pt(!1)):V(t)}q(ft(Q))}),25),e=function(t){"Space"===t.code&&pt((function(t){return gt?t:!t}))};return window.addEventListener("keydown",e,!1),function(){clearInterval(t),window.removeEventListener("keydown",e)}}),[d,V,o,Q,gt]),c.a.createElement(l.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0}},c.a.createElement(x.a,{setParentTokenId:G,setParentUserName:X,centerContent:c.a.createElement(L.a.Collapse,null,c.a.createElement(h.a,{disabled:gt,style:{color:"black",height:"40px",textAlign:"center"},onClick:function(){return pt((function(t){return!t}))}},c.a.createElement(f.a,{style:{height:30,width:30},src:dt?S.a:T.a})),c.a.createElement(L.a.Text,{style:{fontSize:30,marginLeft:10}}," ",Y)),customContent:c.a.createElement(L.a.Text,{style:{fontSize:15}},"Icons made by"," ",c.a.createElement("a",{href:"https://www.flaticon.com/authors/elias-bikbulatov",title:"Elias Bikbulatov"}," ","Elias Bikbulatov")," ","from"," ",c.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"}," ","www.flaticon.com"))}),c.a.createElement(l.a,{style:{position:"relative"}},c.a.createElement(u.a,{style:{position:"relative"}},c.a.createElement(p.a,{ref:E,playing:dt,onBuffer:function(){return Et(!0)},onBufferEnd:function(){return Et(!1)},url:"https://www.youtube.com/watch?v=".concat(b),controls:!1,style:{opacity:0}}))),c.a.createElement(l.a,{fluid:!0,style:{position:"absolute",top:0,left:0,right:0,bottom:0}},c.a.createElement("div",{style:{position:"absolute",left:"50%",marginLeft:"-3px",top:0,bottom:0,borderLeft:"4px solid black"}}),c.a.createElement(y.a,{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:1e3},show:ot,dismissible:!0,onClose:function(){return it(!1)},variant:st?"success":"primary"},st?c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a.Heading,null,"Success: lyrics saved!"),c.a.createElement(h.a,{onClick:function(){return C.push("/play/".concat(M,"/").concat(b,"/").concat(g))}}," Play now!")):c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a.Heading,{style:{justifyContent:"center"}}," Click the button below to confirm your submission "),c.a.createElement(h.a,{onClick:function(){return H()}}," Send Lyric Synchronization"))),c.a.createElement(u.a,{className:"justify-content-center h-10"},c.a.createElement(s.a,{xs:5}),c.a.createElement(s.a,{className:"align-self-center",xs:1}),c.a.createElement(s.a,{style:{alignSelf:"center",fontSize:"20px"},xs:5})),c.a.createElement(j,{videoDuration:Q,syncedLyrics:D,changeLyricById:ht,aboveProgressBar:!0,playing:dt,setPlaying:pt}),c.a.createElement(l.a,{fluid:!0,className:"mw-100 h-10"},c.a.createElement(u.a,{className:"align-self-center"},c.a.createElement(s.a,{xs:1,className:"align-self-center"},c.a.createElement(h.a,{ref:k,disabled:gt,block:!0,onClick:function(){E.current.seekTo(Q-10),k.current.blur()}},c.a.createElement(f.a,{style:{justifyContent:"center",height:30,transform:"scaleX(-1)"},src:n(157)}))),c.a.createElement(s.a,{className:"align-self-center",xs:10},c.a.createElement("hr",{style:{color:"black",backgroundColor:"black",height:2}})),c.a.createElement(s.a,{xs:1,className:"align-self-center"},c.a.createElement(h.a,{ref:w,disabled:gt,block:!0,onClick:function(){E.current.seekTo(Q+10),w.current.blur()}},c.a.createElement(f.a,{style:{justifyContent:"center",height:30},src:n(157)}))))),c.a.createElement(j,{videoDuration:Q,syncedLyrics:D,changeLyricById:ht,aboveProgressBar:!1,playing:dt,setPlaying:pt}),c.a.createElement("div",{style:{width:1,backgroundColor:"black",position:"absolute",left:"50%",transform:"translate(-50%, 0%)"}}),c.a.createElement(L.a,{style:{height:60,maxWidth:"100%"},fixed:"bottom",bg:"secondary",variant:"dark"},c.a.createElement(L.a.Collapse,{style:{position:"absolute",transform:"translate(-50%, 0%)",left:"50%"}},c.a.createElement(L.a.Text,{style:{fontSize:40}},et)),c.a.createElement(L.a.Collapse,{className:"justify-content-end"},c.a.createElement(h.a,{onClick:function(){return it(!0)}}," Submit synchronization ")))))}},97:function(t,e,n){t.exports=n(102)},98:function(t,e,n){"use strict";function r(t,e,n,r,a,o,i){try{var c=t[o](i),u=c.value}catch(s){return void n(s)}c.done?e(u):Promise.resolve(u).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function c(t){r(i,a,o,c,u,"next",t)}function u(t){r(i,a,o,c,u,"throw",t)}c(void 0)}))}}n.d(e,"a",(function(){return a}))}}]);
//# sourceMappingURL=3.bb130f8a.chunk.js.map