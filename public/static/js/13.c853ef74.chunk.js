(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[13],{111:function(e,t,n){e.exports=n.p+"static/media/fast-forward.04baf9a2.png"},147:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var a=n(59),r=n(71),c=n(1),i=n.n(c),o=n(72),s=n(5),u=n(28),l=n(57),f=n(66),m=n(64),b=n(15),y=n(65),d=n(68),p=n.n(d),j=n(69),O=function(e){var t=e.text,n=e.fadeOut,r=e.style,o=Object(c.useState)(0),s=Object(a.a)(o,2),u=s[0],l=s[1],f=Object(c.useState)(""),m=Object(a.a)(f,2),b=m[0],d=m[1],O=function(e){return new Promise((function(t){return setTimeout(t,e)}))};return Object(c.useEffect)((function(){l(1),d(t)}),[]),Object(c.useEffect)((function(){(function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(0),e.next=3,O(250);case 3:d(t),l(1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),i.a.createElement("p",{style:Object(y.a)({textAlign:n?"left":"center",transition:"opacity 0.25s",opacity:u},r)},b)},g=n(63),E=n(70),h=n(27),v=n(61),w=n(150),x=n(108);function S(e){var t=e.id,n=e.text,r=e.time,o=e.timePixelOffset,s=e.changeLyricById,u=e.videoDuration,l=e.width,f=e.playing,m=e.setPlaying,b=Object(c.useState)(""),y=Object(a.a)(b,2),d=(y[0],y[1]),O=Object(c.useState)("primary"),g=Object(a.a)(O,2),E=g[0],h=g[1],w=Object(c.useState)(130),S=Object(a.a)(w,2),k=S[0],L=S[1];Object(c.useEffect)((function(){(d("".concat(Math.floor(r/60),":").concat(r%60>=9?Math.floor(r)%60:"0"+Math.floor(r)%60)),r-u<=.5&&r-u>0)&&function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1e3*(r-u))}));case 2:return h("warning"),e.next=5,new Promise((function(e){return setTimeout(e,500)}));case 5:h("primary");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[u]);var C=Object(c.useState)(o),T=Object(a.a)(C,2),I=T[0],D=T[1],z=Object(c.useState)({}),P=Object(a.a)(z,2),B=(P[0],P[1],Object(c.useState)(!1)),N=Object(a.a)(B,2),F=N[0],R=N[1],M=function(){var e=Object(j.a)(p.a.mark((function e(n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=10*((a=n/l)-.5),L(1e3),r=f,m(!1),s(t,u+a),R(!1),e.next=9,new Promise((function(e){return setTimeout(e,1e3)}));case 9:r&&m(!0),L(130);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){F||D(o)}),[o]),i.a.createElement(i.a.Fragment,null,i.a.createElement(x.DraggableCore,{axis:"x",onStart:function(){return R(!0)},onStop:function(){return M(I)},onDrag:function(e){var t=e.movementX,n=e.clientX,a=e.screenX;D((function(e){return t*(n/a)+e})),L(0)}},i.a.createElement(v.a,{key:t,variant:E,style:{transition:"transform linear ".concat(k,"ms"),position:"absolute",alignSelf:"center",transform:"translate(".concat(I,"px, 0px)"),justifyContent:"start"}},i.a.createElement("p",{style:{fontSize:"30px"}},n))))}function k(e){var t=e.videoDuration,n=e.syncedLyrics,r=e.changeLyricById,o=e.aboveProgressBar,s=e.playing,u=e.setPlaying,l=Object(c.useState)(Array(3)),b=Object(a.a)(l,2),y=b[0],d=b[1],p=Object(c.useState)(0),j=Object(a.a)(p,2),O=j[0],g=j[1],E=Object(c.useRef)();return Object(c.useLayoutEffect)((function(){E.current&&g(E.current.offsetWidth)}),[]),Object(c.useEffect)((function(){for(var e=Array(3),a=0;a<e.length;a++)e[a]=[];n.forEach((function(n){n.forEach((function(n){var a,r=n.time-t;(-5<r&&r<5||!n.time)&&(a=n.id,o?0<=a%6&&a%6<=2:3<=a%6&&a%6<=6)&&e[n.id%3].push(n)}))})),d(e)}),[t]),i.a.createElement(m.a,{ref:E,fluid:!0,style:{height:"30%",width:"80%"}},i.a.createElement(i.a.Fragment,null,y.map((function(e,n){return i.a.createElement(f.a,{key:n,style:{marginTop:"8%"}},e.map((function(e){var n=(e.time-t+5)/10,a=O*n;return i.a.createElement(S,{key:e.id,text:e.text,id:e.id,time:e.time,changeLyricById:r,videoDuration:t,timePixelOffset:a,width:O,playing:s,setPlaying:u})})))}))))}var L=n(74),C=n(106),T=n.n(C),I=n(107),D=n.n(I);function z(){var e=Object(r.a)(["\nmutation postsyncedlyrics($syncedLyrics: [[InputSyncedLyric]], $synchronizationData: InputSynchronizationData){\n  postSyncedLyrics(syncedLyrics: $syncedLyrics, synchronizationData: $synchronizationData)\n}\n"]);return z=function(){return e},e}var P=Object(u.b)(z()),B=function(e){var t=e.syncedLyrics,r=e.startTime,u=e.endTime,b=Object(s.h)(),d=b.youtubeID,p=b.geniusID,j=Object(c.useRef)(null),O=Object(c.useRef)(null),x=Object(c.useRef)(null),S=Object(s.f)(),C=Object(c.useState)(t),I=Object(a.a)(C,2),z=I[0],B=I[1],N=Object(l.b)(P,{variables:{syncedLyrics:z,synchronizationData:{youtubeID:d,geniusID:p,startTime:r,endTime:u}},onCompleted:function(){ee(!0)}}),F=Object(a.a)(N,1)[0],R=function(){var e=Object(c.useState)(0),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)("0:00"),o=Object(a.a)(i,2),s=o[0],u=o[1];return Object(c.useEffect)((function(){var e=Math.floor(n/60),t=Math.floor(n%60);t=t>=10?t:"0"+t.toString(),u("".concat(e,":").concat(t))}),[n]),[n,r,function(e){return e+n},s]}(),M=Object(a.a)(R,4),$=M[0],A=M[1],W=M[2],X=M[3],H=Object(c.useState)(""),J=Object(a.a)(H,2),_=J[0],q=J[1],G=Object(c.useState)(!1),K=Object(a.a)(G,2),Q=K[0],U=K[1],V=Object(c.useState)(!1),Y=Object(a.a)(V,2),Z=Y[0],ee=Y[1],te=function(e,t){var n=function(e){return"".concat(Math.floor(e/60),":").concat(e%60>=9?(e%60).toFixed(2):"0"+(e%60).toFixed(2))};B((function(a){return a.map((function(a){return a.map((function(a){return a.id===e?(q("'".concat(a.text,"' ").concat(n(a.time)," \u2192 ").concat(n(t))),Object(y.a)(Object(y.a)({},a),{},{time:t})):a}))}))})),j.current.seekTo(t-2)},ne=Object(c.useState)(!0),ae=Object(a.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(c.useState)(!0),oe=Object(a.a)(ie,2),se=oe[0],ue=oe[1];Object(c.useEffect)((function(){document.addEventListener("keydown",le,!1);var e=setInterval((function(){if(j.current){var e=j.current.getCurrentTime();e<r&&(j.current.seekTo(r),A(r)),e>u?(j.seekTo(u),A(u),ce(!1)):A(e)}}),200);return function(){clearInterval(e),window.removeEventListener("keydown",le)}}),[]);var le=function(e){"Space"===e.code&&ce((function(e){return!e}))},fe=function(e){var t=W(e);r<t&&t<u&&j.current.seekTo(t)};return i.a.createElement(m.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0}},i.a.createElement(g.a,{centerContent:i.a.createElement(L.a.Collapse,null,i.a.createElement(v.a,{disabled:se,style:{color:"black",height:"40px",textAlign:"center"},onClick:function(){return ce((function(e){return!e}))}},i.a.createElement(h.a,{style:{height:30,width:30},src:re?T.a:D.a})),i.a.createElement(L.a.Text,{style:{fontSize:30,marginLeft:10}}," ",X)),customContent:i.a.createElement(L.a.Text,{style:{fontSize:15}},"Icons made by ",i.a.createElement("a",{href:"https://www.flaticon.com/authors/elias-bikbulatov",title:"Elias Bikbulatov"}," Elias Bikbulatov"),"             from ",i.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"}," www.flaticon.com"))}),i.a.createElement(m.a,{style:{position:"relative"}},i.a.createElement(f.a,{style:{position:"relative"}},i.a.createElement(o.a,{visible:!1,ref:j,playing:re,setBuffering:ue,url:"https://www.youtube.com/watch?v=".concat(d),disableControls:!0}))),i.a.createElement(m.a,{fluid:!0,style:{position:"absolute",top:0,left:0,right:0,bottom:0}},i.a.createElement("div",{style:{position:"absolute",left:"50%",marginLeft:"-3px",top:0,bottom:0,borderLeft:"4px solid black"}}),i.a.createElement(w.a,{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:1e3},show:Q,dismissible:!0,onClose:function(){return U(!1)},variant:Z?"success":"primary"},Z?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.a.Heading,null,"Success: lyrics saved!"),i.a.createElement(v.a,{onClick:function(){return S.push("/p/".concat(d,"/").concat(p))}}," Play now!")):i.a.createElement(i.a.Fragment,null,i.a.createElement(w.a.Heading,{style:{justifyContent:"center"}}," Click the button below to confirm your submission "),i.a.createElement(v.a,{onClick:function(){return F()}}," Send Lyric Synchronization"))),i.a.createElement(f.a,{className:"justify-content-center h-10"},i.a.createElement(E.a,{xs:5}),i.a.createElement(E.a,{className:"align-self-center",xs:1}),i.a.createElement(E.a,{style:{alignSelf:"center",fontSize:"20px"},xs:5})),i.a.createElement(k,{videoDuration:$,syncedLyrics:z,changeLyricById:te,aboveProgressBar:!0,playing:re,setPlaying:ce}),i.a.createElement(m.a,{fluid:!0,className:"mw-100 h-10"},i.a.createElement(f.a,{className:"align-self-center"},i.a.createElement(E.a,{xs:1,className:"align-self-center"},i.a.createElement(v.a,{ref:x,disabled:se,block:!0,onClick:function(){fe(-10),x.current.blur()}},i.a.createElement(h.a,{style:{justifyContent:"center",height:30,transform:"scaleX(-1)"},src:n(111)}))),i.a.createElement(E.a,{className:"align-self-center",xs:10},i.a.createElement("hr",{style:{color:"black",backgroundColor:"black",height:2}})),i.a.createElement(E.a,{xs:1,className:"align-self-center"},i.a.createElement(v.a,{ref:O,disabled:se,block:!0,onClick:function(){fe(10),O.current.blur()}},i.a.createElement(h.a,{style:{justifyContent:"center",height:30},src:n(111)}))))),i.a.createElement(k,{videoDuration:$,syncedLyrics:z,changeLyricById:te,aboveProgressBar:!1,playing:re,setPlaying:ce}),i.a.createElement("div",{style:{width:1,backgroundColor:"black",position:"absolute",left:"50%",transform:"translate(-50%, 0%)"}}),i.a.createElement(L.a,{style:{height:60,maxWidth:"100%"},fixed:"bottom",bg:"secondary",variant:"dark"},i.a.createElement(L.a.Collapse,{style:{position:"absolute",transform:"translate(-50%, 0%)",left:"50%"}},i.a.createElement(L.a.Text,{style:{fontSize:40}},_)),i.a.createElement(L.a.Collapse,{className:"justify-content-end"},i.a.createElement(v.a,{onClick:function(){return U(!0)}}," Submit synchronization ")))))};function N(){var e=Object(r.a)(["\nquery processedlyrics($id: String){\n  processedLyrics(id: $id){\n    id\n    text\n  }\n}"]);return N=function(){return e},e}var F=Object(u.b)(N());function R(e){var t=e.startTime,n=e.endTime;console.log(t),console.log(n);var r=Object(s.h)(),u=r.youtubeID,y=r.geniusID,d=Object(c.useRef)(null),p=Object(c.useState)(!1),j=Object(a.a)(p,2),E=j[0],h=j[1],v=Object(c.useState)(!1),w=Object(a.a)(v,2),x=w[0],S=w[1],k=Object(c.useState)(0),L=Object(a.a)(k,2),C=L[0],T=L[1],I=Object(c.useState)(0),D=Object(a.a)(I,2),z=D[0],P=D[1];Object(c.useEffect)((function(){return document.addEventListener("keydown",N,!1),function(){return window.removeEventListener("keydown",N)}}),[]);var N=function(e){e.keyCode&&Y((function(e){return Y(e+1)}))},R=Object(c.useState)({}),M=Object(a.a)(R,2),$=M[0],A=M[1];Object(c.useEffect)((function(){var e=setInterval((function(){d.current&&d.current.getCurrentTime()>n&&S(!0)}),1e3);return function(){return clearInterval(e)}}),[d.current]);var W=Object(c.useState)("Waiting for lyrics to be processed..."),X=Object(a.a)(W,2),H=X[0],J=X[1],_=Object(c.useState)(!0),q=Object(a.a)(_,2),G=q[0],K=q[1],Q=Object(c.useState)(0),U=Object(a.a)(Q,2),V=U[0],Y=U[1],Z=Object(l.c)(F,{variables:{id:y},onCompleted:function(){A(Z.processedLyrics.map((function(e){return e.map((function(e){return delete e.__typename,e}))}))),J("Press any key to start the video")}}).data;return Object(c.useEffect)((function(){0!=V&&(E?G||C<$.length&&(A((function(e){return e.map((function(e,t){return e.map((function(e,n){return t===C&&n===z&&(e.time=d.current.getCurrentTime()),e}))}))})),$[C].length-1===z?(T((function(e){return e+1})),P(0)):P((function(e){return e+1}))):(h(!0),d.current&&d.current.seekTo(t)))}),[V]),Object(c.useEffect)((function(){G||J("Whenever the highlighted word is said, press any key to sync it.")}),[G]),x?i.a.createElement(B,{syncedLyrics:$,startTime:t,endTime:n}):i.a.createElement(m.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0}},i.a.createElement(g.a,{centerContent:i.a.createElement(O,{text:H,style:{fontSize:30,color:"white",zIndex:1e3,textAlign:"center"}})}),i.a.createElement(f.a,{className:"justify-content-md-center"},i.a.createElement(o.a,{visible:!0,ref:d,fadeOut:!1,playing:E,url:"https://www.youtube.com/watch?v=".concat(u),setEnded:S,setBuffering:K,disableControls:!0})),Z?Z.processedLyrics.slice(C).map((function(e,t){return i.a.createElement(f.a,{className:"justify-content-md-center",style:{minWidth:"100%"},key:t},e.map((function(e,n){return 0===t&&z===n?i.a.createElement("mark",{key:e.id,style:{backgroundColor:"#007bff",color:"#fff",marginBottom:10,fontSize:"40px",marginLeft:"0.5em"}},e.text):i.a.createElement("p",{key:e.id,style:{marginBottom:10,fontSize:"40px",marginLeft:"0.5em"}},e.text)})))})):i.a.createElement(b.a,{centered:!0}))}}}]);
//# sourceMappingURL=13.c853ef74.chunk.js.map